<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Suscripciones</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://sdk.mercadopago.com/js/v2"></script>
    <script src="config.js"></script>
</head>
<body>
    <div class="container">
        <h1>Test Suscripciones MercadoPago</h1>

        <div class="section">
            <h2>1. Obtener Token de Plataforma</h2>
            <div class="form-group">
                <label>Token de Plataforma:</label>
                <input type="text" id="platform_token" placeholder="token_2025">
            </div>
            <button onclick="loadPlans()">Cargar Planes</button>
            <div id="plans_response" class="response"></div>
            <div id="plans_list" class="plans-list" style="display: none;"></div>
        </div>

        <div class="section">
            <h2>2. Crear Cuenta (Account)</h2>
            <div class="form-group">
                <label>Store UUID:</label>
                <input type="text" id="store_uuid" placeholder="UUID de la tienda">
            </div>
            <div class="form-group">
                <label>Store Name:</label>
                <input type="text" id="store_name" placeholder="Nombre de la tienda">
            </div>
            <div class="form-group">
                <label>Plan UUID:</label>
                <input type="text" id="plan_uuid" readonly placeholder="Selecciona un plan arriba">
            </div>
            <button onclick="createAccount()">Crear Cuenta</button>
            <div id="account_response" class="response"></div>
        </div>

        <div class="section">
            <h2>3. Crear Suscripción (Pago Transparente)</h2>
            <div class="form-group">
                <label>API Token de Cuenta:</label>
                <input type="text" id="api_token" placeholder="Token obtenido al crear cuenta">
            </div>
            <div class="form-group">
                <label>Tenant ID:</label>
                <input type="text" id="tenant_id" placeholder="UUID del tenant">
            </div>
            <div class="form-group">
                <label>Plan UUID:</label>
                <input type="text" id="subscription_plan_uuid" placeholder="UUID del plan">
            </div>
            
            <form id="form-checkout">
                <div class="form-group">
                    <label>Número de tarjeta</label>
                    <div id="form-checkout__cardNumber" class="container" style="height: 40px; background: white; border-radius: 6px;"></div>
                </div>
                <div class="form-group">
                    <label>Fecha de vencimiento</label>
                    <div id="form-checkout__expirationDate" class="container" style="height: 40px; background: white; border-radius: 6px;"></div>
                </div>
                <div class="form-group">
                    <label>CVV</label>
                    <div id="form-checkout__securityCode" class="container" style="height: 40px; background: white; border-radius: 6px;"></div>
                </div>
                <div class="form-group">
                    <label>Titular de la tarjeta</label>
                    <input type="text" id="form-checkout__cardholderName" />
                </div>
                <div class="form-group">
                    <label>Email del Cliente</label>
                    <input type="email" id="form-checkout__cardholderEmail" />
                </div>
                
                <select id="form-checkout__issuer" style="display:none"></select>
                <select id="form-checkout__installments" style="display:none"></select>
                <input type="hidden" id="form-checkout__identificationType" />
                <input type="hidden" id="form-checkout__identificationNumber" />
                
                <button type="submit" id="form-checkout__submit">Pagar Suscripción</button>
            </form>
            <div id="subscription_response" class="response"></div>
        </div>

        <div class="section">
            <h2>4. Gestión de Suscripciones</h2>
            <div class="form-group">
                <label>Subscription UUID:</label>
                <input type="text" id="manage_subscription_uuid" placeholder="UUID de la suscripción">
            </div>
            <div class="form-group">
                <label>Acción:</label>
                <select id="subscription_action">
                    <option value="cancel">Cancelar</option>
                    <option value="pause">Pausar</option>
                    <option value="resume">Reanudar</option>
                </select>
            </div>
            <button onclick="manageSubscription()">Ejecutar Acción</button>
            <div id="manage_response" class="response"></div>
        </div>
    </div>
    <script src="main.js"></script>
</body>
</html>